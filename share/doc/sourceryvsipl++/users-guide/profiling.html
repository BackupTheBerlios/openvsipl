<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 5. Profiling</title><link rel="stylesheet" href="cs.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="index.html" title="Sourcery VSIPL++"><link rel="up" href="pt01.html" title="Part I. Working with Sourcery VSIPL++"><link rel="prev" href="ch04s05.html" title="4.5. Creating custom evaluators"><link rel="next" href="ch05s02.html" title="5.2. Using the Profiler"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 5. Profiling</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s05.html">Prev</a> </td><th width="60%" align="center">Part I. Working with Sourcery VSIPL++</th><td width="20%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="profiling"></a>Chapter 5. Profiling</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="profiling.html#Enabling%20Profiling">5.1. Enabling Profiling</a></span></dt><dt><span class="section"><a href="ch05s02.html">5.2. Using the Profiler</a></span></dt><dt><span class="section"><a href="profiler-output.html">5.3. Profiler Output</a></span></dt></dl></div><p>
    This reference explains how to compile a program with profiling
    statements enabled, how to use the profiling functions in order
    to investigate the execution timing of a program and finally how
    to interprete the resulting profile data.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Enabling%20Profiling"></a>5.1. Enabling Profiling</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="compile-options"></a>5.1.1. Configure and Compile Options</h3></div></div></div><p>
      There are no configure options for profiling, instead it is enabled
      via compile-time options.  However, to use profiling it is necessary
      to configure the library with a suitable high-resolution timer (refer
      to the Quickstart for details on this and other configuration options).
      For example,
</p><pre class="screen">--enable-timer=x86_64_tsc</pre><p>
      Pre-built versions of the library enable a suitable timer 
      for your system.
    </p><p>
      You may enable profiling per category by defining the corresponding 
      macros for all the categories you want to enable. On many systems,
      these macros may be added to the <code class="varname">CXXFLAGS</code> variable
      in the project makefile, e.g. 
      </p><pre class="screen">CXXFLAGS="-DVSIP_PROFILE_USER -DVSIP_PROFILE_MEMORY"</pre><p>.
    </p><div class="table"><a name="mask-values"></a><p class="title"><b>Table 5.1. Profiling Configuration Mask</b></p><div class="table-contents"><table summary="Profiling Configuration Mask" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>Section</th><th>Description</th><th>Macro</th></tr></thead><tbody><tr><td>memory</td><td>Memory management and block copying</td><td>VSIP_PROFILE_MEMORY</td></tr><tr><td>dispatch</td><td>Operation dispatch (incl. expression evaluation)</td><td>VSIP_PROFILE_DISPATCH</td></tr><tr><td>parallel</td><td>Parallel data I/O</td><td>VSIP_PROFILE_PARALLEL</td></tr><tr><td>func</td><td>Elementwise Functions</td><td>VSIP_PROFILE_FUNC</td></tr><tr><td>signal</td><td>Signal Processing</td><td>VSIP_PROFILE_SIGNAL</td></tr><tr><td>matvec</td><td>Matrix - Vector operations</td><td>VSIP_PROFILE_MATVEC</td></tr><tr><td>solver</td><td>Linear Algebra solvers</td><td>VISP_PROFILE_SOLVER</td></tr><tr><td>user</td><td>User-defined Operations</td><td>VSIP_PROFILE_USER</td></tr><tr><td>all</td><td>Everything</td><td>VSIP_PROFILE_ALL</td></tr></tbody></table></div></div><br class="table-break"><p>
      The above macros may be defined on the command line, or in a header, as long as
      that is included before any Sourcery VSIPL++ header.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id332317"></a>5.1.2. Command Line Options</h3></div></div></div><p>
      For programs that have been compiled with profiling enabled, 
      the profiling mode and output file can be controlled from the 
      command line.  You may profile programs without modifying your
      source files using this method.  
      Use this to choose the profiler mode:
</p><pre class="screen">--vsip-profile-mode=<em class="replaceable"><code>mode</code></em></pre><p>
      where <em class="replaceable"><code>mode</code></em> is either <code class="code">accum</code> 
      or <code class="code">trace</code>.
    </p><p>
      Specify the path to the log file for profile output using:
</p><pre class="screen">--vsip-profile-output=/path/to/logfile</pre><p>
      The second option defaults to the standard output on most 
      systems, so it may be omitted if that is desireable.
    </p><p>
      The profiling command line options control profiling for the entire
      program execution.  For finer grain control, such as enabling profiling
      during a specific portion of the program, or to mix different profiling
      modes, explicit profiling objects can be created.
    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s05.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt01.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">4.5. Creating custom evaluators </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 5.2. Using the Profiler</td></tr></table></div></body></html>
